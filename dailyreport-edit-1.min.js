var DailyReportEdit_01=function(){var n=function(){function r(n){$.ajax({url:"/dailyreport/binddatatodropdown",success:function(t){$.each(t.Clientlist,function(t,i){$("#RouteLogs_"+n+"__ClientId").append($("<option>",{value:i.Value,text:i.Text}))});$.each(t.PaymentMode,function(t,i){$("#RouteLogs_"+n+"__ClientId_payment").append($("<option>",{value:i.Value,text:i.Text}))})}});$("#frm_daily-report").find(".cleaning-time").timepicker({autoclose:!0,minuteStep:5})}function u(){var t=$("#frm_daily-report").find("#StartMi").val(),i=$("#frm_daily-report").find("#EndMi").val(),n;t!=""&i!=""&&(n=parseInt(i)-parseInt(t),$("#frm_daily-report").find("#DailyMi").val(n),$("#frm_daily-report").find("#daily_miles").text(n))}function n(){var o=$("#frm_daily-report").find("#StartTime").val(),s=$("#frm_daily-report").find("#EndTime").val(),h=$("#frm_daily-report").find("#MinusTime").val(),c=new Date("01/01/2007 "+o),l=new Date("01/01/2007 "+s),t=(l-c)/6e4,i=t%60,a=(t-i)/60;totalTime=a+":"+i;var r=totalTime.split(":"),u=h.split(":"),v=r[0]+"."+r[1],y=u[0]+"."+u[1],p=(v-y).toFixed(2).toString(),f=p.split("."),e=f[0],n=f[1];n>59&&(e+=Math.floor(n/60),n=n%60);$("#frm_daily-report").find("#TeamTime").val(e+":"+n)}function f(n){$("#frm_daily-report").find("#StartTime"+n+"_total").val("");$("#frm_daily-report").find("."+n+"-total").text("");var t=$("#frm_daily-report").find("."+n+"-in").val(),i=$("#frm_daily-report").find("."+n+"-out").val(),f=new Date("01/01/2007 "+t),e=new Date("01/01/2007 "+i),r=(e-f)/6e4,u=r%60,o=(r-u)/60;totalTime=o+":"+u;t!=""&i!=""?($("#frm_daily-report").find("#"+n+"_total").val(totalTime),$("#frm_daily-report").find("."+n+"-total").text(totalTime)):($("#frm_daily-report").find("#"+n+"_total").val("00:00"),$("#frm_daily-report").find("."+n+"-total").text("00:00"))}function e(n){var i=$("#frm_daily-report").find("."+n+"_totalamount").val(),r=$("#frm_daily-report").find("."+n+"_amountpaid").val(),t=parseInt(i)-parseInt(r);r!=""?($("#frm_daily-report").find("#"+n+"_amountdue").val(t),$("#frm_daily-report").find("."+n+"-amountdue").text(t)):($("#frm_daily-report").find("#"+n+"_amountdue").val(t),$("#frm_daily-report").find("."+n+"-amountdue").text(i))}$("#frm_daily-report").find("#CrewId").change(function(){var n=$(this).val();n>0?fillDropdownList({target:$("#frm_daily-report").find(".crew-members"),url:"/crew/listfordropdown",data:{id:n}}):$("#frm_daily-report").find('.crew-members option[value=""]').attr("selected",!0)});$(document).ready(function(){var t=$("#frm_daily-report").find(".lnk_add_routelog").data("count"),n,i,r;if(t!=0)for(n=0;n<t;n++)i=$("#frm_daily-report").find("#RouteLogs_"+n+"__ClientId").val(),$("#frm_daily-report").find("#RouteLogs_"+n+"__ClientId option[value="+i+"]").attr("selected",!0),r=$("#frm_daily-report").find("#RouteLogs_"+n+"__PaymentModeId").val(),$("#frm_daily-report").find("#RouteLogs_"+n+"__PaymentModeId option[value="+r+"]").attr("selected",!0)});$("#btn_back").on("click",function(){window.location.href="/dailyreports"});var t=$("#newrow"),i=$("#LogDetails");$(".lnk_add_routelog").click(function(n){var u,f,e;n.preventDefault();u=$(this).data("count");f=t.clone();f.html($(f).html().replace(/#/g,u));e=f.find("tr");i.append(e);r(u);$(this).data("count",+u+1)});$("#frm_daily-report").find(".cleaning-time").timepicker({autoclose:!0,minuteStep:5});$("#frm_daily-report").on("change","#DriverId",function(){$("#frm_daily-report").find("#DriverLicense").val("");$("#frm_daily-report").find("#driver_license").text("");var n=$(this).val();n>0&&$.ajax({url:"/dailyreport/getdriverlicense",data:{id:n},success:function(n){$("#frm_daily-report").find("#DriverLicense").val(n.license);$("#frm_daily-report").find("#driver_license").text(n.license)}})});$("#frm_daily-report").on("change",".client-id",function(){var t=$(this).val(),i=$(this).attr("id"),n;$("#frm_daily-report").find("#"+i).val(t);n=i.substring(0,11);$("#frm_daily-report").find("#"+n+"__ClientId_number").val("");$("#frm_daily-report").find("."+n+"__ClientId_number").text("");t>0&&$.ajax({url:"/dailyreport/getclientaccountnumber",data:{id:t},success:function(t){$("#frm_daily-report").find("#"+n+"-account_number").val(t.accountnumber);$("#frm_daily-report").find("."+n+"-account_number").text(t.accountnumber)}})});$("#frm_daily-report").on("change",".payment-mode",function(){var n=$(this).val(),t=$(this).attr("id");$("#frm_daily-report").find("#"+t).val(n)});$("#frm_daily-report").on("keyup",".miles",function(){u()});$("#frm_daily-report").on("change",".report-time",function(){n()});$("#frm_daily-report").on("keyup","#MinusTime",function(){n()});$("#frm_daily-report").on("change",".cleaning-time",function(){var n=$(this).attr("id");f(n)});$("#frm_daily-report").on("keyup",".amount",function(){var n=$(this).attr("id");e(n)});$("#frm_daily-report").on("click",".close",function(){var n=$(this).attr("id");$("#frm_daily-report").find("#Deleted"+n).val("true");$(this).closest("tr").css("visibility","hidden")})};return{init:function(){n()}}}();jQuery(document).ready(function(){DailyReportEdit_01.init()});
//# sourceMappingURL=dailyreport-edit-1.min.js.map
