var Jobs=function(){var n=function(){var n=new Datatable;n.init({src:$("#datatable_ajax"),onSuccess:function(){},onError:function(){},loadingMessage:"Loading...",dataTable:{bStateSave:!0,lengthMenu:[[10,20,50,100,150],[10,20,50,100,150]],pageLength:10,ajax:{url:"/job/list"},columns:[{data:"Code",orderable:!0,render:function(n,t,i){return t=="display"?'<a href="javascript:;" class="btn-edit" data-id="'+i.Id+'">'+n+"<\/a>":n}},{data:"Client",orderable:!0},{data:"Location",orderable:!0},{data:"Type",orderable:!0},{data:"AssignedTo",orderable:!0,render:function(n,t,i){return t=="display"?i.IsAssignedToTeam?'<a href="javascript:;" class=" btn-team-view" data-id="'+i.AssignedId+'">'+i.AssignedTo+"<\/a>":i.AssignedTo:n}},{data:"Start",orderable:!0},{data:"End",orderable:!0},{data:"Status",orderable:!0,render:function(n,t,i){return t==="display"&&i.StatusImageUrl!=""?'<img height="20px" src="'+i.StatusImageUrl+'" title="'+i.Status+'" />':i.Status}},{data:"Id",orderable:!1,render:function(n,t,i){return t==="display"?'<a class="btn btn-xs default green-haze-stripe btn-view-job" href="javascript:;" data-id="'+i.Id+'"> View<\/a>                                     <a class="btn btn-xs default btn-edit" href="javascript:;" data-id="'+i.Id+'"><i class="fa fa-pencil"><\/i> Edit<\/a>                                     <a class="btn btn-xs red-haze btn-delete" href="#" data-id="'+i.Id+'"><i class="fa fa-trash-o"><\/i> Delete<\/a>':n}}],buttons:[{extend:"print",className:"btn dark btn-outline",exportOptions:{columns:[0,1,2,3,4,5,6,7],stripHtml:!1,format:{body:function(n){var t=~n.toLowerCase().indexOf("img")?$(n).is("img"):!1;return t?$(n).attr("title"):n}}}},{extend:"copy",className:"btn red btn-outline",exportOptions:{columns:[0,1,2,3,4,5,6,7],stripHtml:!0,format:{body:function(n){var t=~n.toLowerCase().indexOf("img")?$(n).is("img"):!1;return t?$(n).attr("title"):n.replace(/<.*?>/g,"")}}}},{extend:"pdf",className:"btn green btn-outline",exportOptions:{columns:[0,1,2,3,4,5,6,7],stripHtml:!0,format:{body:function(n){var t=~n.toLowerCase().indexOf("img")?$(n).is("img"):!1;return t?$(n).attr("title"):n.replace(/<.*?>/g,"")}}}},{extend:"excel",className:"btn yellow btn-outline ",exportOptions:{columns:[0,1,2,3,4,5,6,7]},stripHtml:!1,format:{body:function(n){var t=~n.toLowerCase().indexOf("img")?$(n).is("img"):!1;return t?$(n).attr("title"):n}}},{extend:"csv",className:"btn purple btn-outline ",exportOptions:{columns:[0,1,2,3,4,5,6,7],stripHtml:!1,format:{body:function(n){var t=~n.toLowerCase().indexOf("img")?$(n).is("img"):!1;return t?$(n).attr("title"):n.replace(/<.*?>/g,"")}}}},{extend:"colvis",className:"btn dark btn-outline",text:"Columns",exportOptions:{columns:[0,1,2,3,4,5,6,7],stripHtml:!1,format:{body:function(n){var t=~n.toLowerCase().indexOf("img")?$(n).is("img"):!1;return t?$(n).attr("title"):n}}}}],order:[[0,"asc"]]}});$("#btn_search").on("click",function(t){t.preventDefault();var i=$("#frm_job_search").serializeArray();$.each(i,function(t,i){n.setAjaxParam(i.name,i.value)});n.getDataTable().ajax.reload()});$("#tools > li > a.tool-action").on("click",function(){var t=$(this).attr("data-action");n.getDataTable().button(t).trigger()});$("#btn_reset").on("click",function(){n.clearAjaxParams();n.getDataTable().ajax.reload()});$("#datatable_ajax tbody").on("click",".btn-delete",function(t){t.preventDefault();deleteEntity({data:{id:$(this).data("id")},confirm:!0,message:"Are you sure you want to delete this job?",url:"/job/delete",grid:n})});$("#datatable_ajax tbody").on("click",".btn-team-view",function(n){n.preventDefault();showModal({url:"/crew/members/"+$(this).data("id"),vm:$("#modal_members")})})};return{init:function(){n()}}}();jQuery(document).ready(function(){Jobs.init()});