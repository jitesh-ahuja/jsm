var JobEdit_02=function(){var n=$("#modal_job"),t=function(){function i(){displayHtmlResponse({url:"/document/list",data:{jobId:n.find("#tab_documents").data("jobid")},container:n.find("#tab_documents .portlet-body")})}var t=$("#modal_document");t.on("shown.bs.modal",function(){$(this).find("#Title").focus()});n.on("click","#tab_documents .btn-add",function(i){i.preventDefault();t.find(".modal-title").html("Add Document");t.data("mode","create");showModal({url:"/document/create",data:{jobId:n.find("#tab_documents").data("jobid")},vm:t})});n.on("click","#tab_documents .btn-edit",function(n){n.preventDefault();t.find(".modal-title").html("Edit Document");t.data("mode","edit");showModal({data:{id:$(this).data("id")},url:"/document/edit",vm:t})});t.on("click",".btn-save",function(){$("#frm_document").valid()&&$.ajax({cache:!1,type:"POST",url:"/document/"+t.data("mode"),data:new FormData($("#frm_document")[0]),contentType:!1,processData:!1,success:function(n){n.success?(t.modal("hide"),toastr.success(n.message),i()):t.find(".modal-body").html(n)},error:function(n,t,i){toastr.error(i)}})});n.on("click","#tab_documents .btn-delete",function(n){n.preventDefault();deleteEntity({data:{id:$(this).data("id")},message:"Are you sure you want to delete this document?",url:"/document/delete",callback:function(n){n.success?(toastr.success(n.message),i()):toastr.error(n.message)}})})},i=function(){function i(){displayHtmlResponse({url:"/equipment/list",data:{jobId:n.find("#tab_equipments").data("jobid")},container:n.find("#tab_equipments .portlet-body")})}var t=$("#modal_equipment");t.on("shown.bs.modal",function(){$(this).find("#Name").focus()});n.on("click","#tab_equipments .btn-add",function(i){i.preventDefault();t.find(".modal-title").html("Add Equipment");t.data("mode","create");showModal({url:"/equipment/create",data:{jobId:n.find("#tab_equipments").data("jobid")},vm:t})});n.on("click","#tab_equipments .btn-edit",function(n){n.preventDefault();t.find(".modal-title").html("Edit Equipment");t.data("mode","edit");showModal({data:{id:$(this).data("id")},url:"/equipment/edit",vm:t})});t.on("click",".btn-save",function(){$("#frm_equipment").valid()&&$.ajax({cache:!1,type:"POST",url:"/equipment/"+t.data("mode"),data:$("#frm_equipment").serialize(),success:function(n){n.success?(t.modal("hide"),toastr.success(n.message),i()):t.find(".modal-body").html(n)},error:function(n,t,i){toastr.error(i)}})});n.on("click","#tab_equipments .btn-delete",function(n){n.preventDefault();deleteEntity({data:{id:$(this).data("id")},message:"Are you sure you want to delete this equipment?",url:"/equipment/delete",callback:function(n){n.success?(toastr.success(n.message),i()):toastr.error(n.message)}})})},r=function(){var t=$("#modal_jobcard");t.on("shown.bs.modal",function(){});n.on("click","#tab_jobcard .btn-preview",function(i){i.preventDefault();t.find(".modal-title").html("Job Card Preview");showModal({url:"/jobcard/jobcardPreview",data:{jobId:n.find("#tab_jobcard").data("jobid")},vm:t})});n.on("click","#tab_jobcard .btn-email",function(n){n.preventDefault();$("#frm_jobcard").valid()&&$.ajax({cache:!1,type:"POST",url:"/jobcard/sendemail",data:$("#frm_jobcard").serialize(),success:function(n){n.success&&toastr.success(n.message)},error:function(n,t,i){toastr.error(i)}})})};return{init:function(){t();i();r()}}}();jQuery(document).ready(function(){JobEdit_02.init()});
//# sourceMappingURL=job-edit-2.min.js.map
